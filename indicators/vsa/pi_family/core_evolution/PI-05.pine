// filepath: /TradingView-Pine-Scripts/TradingView-Pine-Scripts/src/indicators/PI21-Scalping.pine
// Â© 2025 Gemini AI - PI v2.1 Scalping
// @version=5
indicator("PI v2.1 Scalping", shorttitle="PI v2.1 Scalping", overlay=true, max_labels_count=500)

// === SCALPING PARAMETERS ===
scalpLookback = input.int(5, "Scalping Lookback Period", minval=1)
scalpVolumeMultiplier = input.float(2.0, "Scalping Volume Multiplier", step=0.1)
scalpATRMultiplier = input.float(1.5, "Scalping ATR Multiplier", step=0.1)

// === SCALPING LOGIC ===
atrValue = ta.atr(14)
scalpEntryPrice = close + (atrValue * scalpATRMultiplier)
scalpExitPrice = close - (atrValue * scalpATRMultiplier)

// === VSA SIGNAL DETECTION FOR SCALPING ===
var float scalpScore = 0.0
var string scalpSignal = na

if barstate.isconfirmed
    isHighVol = volume > ta.sma(volume, scalpLookback) * scalpVolumeMultiplier
    isNarrowRange = (high - low) < (ta.sma(high - low, scalpLookback) * 0.5)

    if isHighVol and isNarrowRange
        scalpSignal := "SCALP"
        scalpScore += 1.0

// === PLOT SCALPING SIGNAL ===
plotshape(scalpSignal == "SCALP", style=shape.labelup, location=location.belowbar, color=color.green, size=size.small, text="SCALP")

// === DISPLAY SCALPING SCORE ===
if scalpScore != 0
    label.new(bar_index, low - (atrValue * 2), str.tostring(scalpScore, "#.#"), style=label.style_none, yloc=yloc.price, color=color.new(color.gray, 30), textcolor=color.black, size=size.normal)